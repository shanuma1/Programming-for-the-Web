<!doctype html>
<html lang='en-US'>
<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="../../assets/styles/article.css" rel="stylesheet" type="text/css" />
  <title>CS 544: Objects</title>
<link href="objects/hl-fine_blue.css" rel="stylesheet"/>
</head>
<body>
    <nav>
      <ul>
	<li><a href="../../index.html" class="material-icons">house</a></li>
	<li><a href="../../docs/index.html">Docs</a></li>
	<li><a href="../../exams-quizzes/index.html">Exams &amp; Quizzes</a></li>
	<li><a href="../../exercises/index.html">Exercises</a></li>
	<li><a href="../../hws/index.html">Homeworks</a></li>
	<li><a href="../../misc/index.html">Misc</a></li>
	<li><a href="../../projects/index.html">Projects</a></li>
	<li><a href="../../slides/index.html">Slides</a></li>
	<li><a id="loginAction"></a></li>
      </ul>
    </nav>
  <div class="slide-controls" style="display: none;">
    <span class="float-left">
      <span class="first-control">
	<a href="#">
	  <img src="../../assets/images/go-first.png">
	</a>
      </span>
      <span class="previous-control">
	<a href="#">
	  <img src="../../assets/images/go-previous.png">
	</a>
      </span>
    </span>
    <span class="float-right">
      <span class="next-control">
	<a href="#">
	  <img src="../../assets/images/go-next.png">
	</a>
      </span>
      <span class="last-control">
	<a href="#">
	  <img src="../../assets/images/go-last.png">
	</a>
      </span>
    </span>
    <div class="slide-end">&nbsp;<br></div> <!-- hack -->
  </div>
<div class="content">
<section data-coord="objects.umt:1:0"><h1 data-coord="objects.umt:1:0">Objects</h1><section class="umt-slide" data-coord="objects.umt:4:0"><h2 data-coord="objects.umt:4:0">Object Basics</h2><p data-coord="objects.umt:7:0">An object is merely a named collection of name-value pairs (which include
functions).  Values are referred to as object <strong data-coord="objects.umt:7:120">properties</strong>.
</p><pre><span class="hl opt">&gt;</span> x <span class="hl opt">= {</span> a<span class="hl opt">:</span> <span class="hl num">9</span> <span class="hl opt">}</span>  <span class="hl slc">//Object literal notation</span>
<span class="hl opt">{</span> a<span class="hl opt">:</span> <span class="hl num">9</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span> x<span class="hl opt">.</span>a
<span class="hl num">9</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">delete</span> x<span class="hl opt">.</span>a
<span class="hl kwa">true</span>
<span class="hl opt">&gt;</span> x
<span class="hl opt">{}</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">delete</span> x<span class="hl opt">.</span>a   <span class="hl slc">//false returned only for non-config</span>
<span class="hl kwa">true</span>           <span class="hl slc">//property in non-strict mode</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:24:0"><h2 data-coord="objects.umt:24:0">Object Basics Continued</h2><pre><span class="hl opt">&gt;</span> x <span class="hl opt">= {</span> a<span class="hl opt">:</span> <span class="hl num">9</span><span class="hl opt">,</span>   <span class="hl slc">//anon function is value for f</span>
        <span class="hl kwd">f</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">(</span>a<span class="hl opt">,</span> b<span class="hl opt">) {</span> <span class="hl kwa">return</span> a <span class="hl opt">+</span> b<span class="hl opt">; } }</span>
<span class="hl opt">{</span> a<span class="hl opt">:</span> <span class="hl num">9</span><span class="hl opt">,</span> f<span class="hl opt">: [</span>Function<span class="hl opt">:</span> f<span class="hl opt">] }</span>
<span class="hl opt">&gt;</span> x<span class="hl opt">.</span><span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">5</span><span class="hl opt">)</span>
<span class="hl num">8</span>
<span class="hl opt">&gt;</span> x <span class="hl opt">=</span> <span class="hl str">&apos;a&apos;</span>
<span class="hl str">&apos;a&apos;</span>
<span class="hl opt">&gt; { [</span>x<span class="hl opt">]:</span> <span class="hl num">42</span> <span class="hl opt">}</span>  <span class="hl slc">//variable as name.</span>
<span class="hl opt">{</span> a<span class="hl opt">:</span> <span class="hl num">42</span> <span class="hl opt">}</span>
<span class="hl opt">&gt; {</span> x <span class="hl opt">}</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> <span class="hl str">&apos;a&apos;</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:44:0"><h2 data-coord="objects.umt:44:0">Motivating Example for Prototypes: Complex Numbers</h2><pre><span class="hl kwa">const</span> c1 <span class="hl opt">= {</span>
  x<span class="hl opt">:</span> <span class="hl num">1</span><span class="hl opt">,</span>
  y<span class="hl opt">:</span> <span class="hl num">1</span><span class="hl opt">,</span>
  <span class="hl kwd">toString</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> <span class="hl str">`</span><span class="hl ipl">${this.x}</span> <span class="hl str">+</span> <span class="hl ipl">${this.y}</span><span class="hl str">i`</span>
  <span class="hl opt">},</span>
  <span class="hl kwd">magnitude</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> Math<span class="hl opt">.</span><span class="hl kwd">sqrt</span><span class="hl opt">(</span><span class="hl kwa">this</span><span class="hl opt">.</span>x<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">+</span> <span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>
</pre></section><section class="umt-slide" data-coord="objects.umt:50:0"><h2 data-coord="objects.umt:50:0">Motivating Example for Prototypes: Complex Numbers Continued</h2><pre>
<span class="hl kwa">const</span> c2 <span class="hl opt">= {</span>
  x<span class="hl opt">:</span> <span class="hl num">3</span><span class="hl opt">,</span>
  y<span class="hl opt">:</span> <span class="hl num">4</span><span class="hl opt">,</span>
  <span class="hl kwd">toString</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> <span class="hl str">`</span><span class="hl ipl">${this.x}</span> <span class="hl str">+</span> <span class="hl ipl">${this.y}</span><span class="hl str">i`</span>
  <span class="hl opt">},</span>
  <span class="hl kwd">magnitude</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> Math<span class="hl opt">.</span><span class="hl kwd">sqrt</span><span class="hl opt">(</span><span class="hl kwa">this</span><span class="hl opt">.</span>x<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">+</span> <span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>

console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c1.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c1.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span>
console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c2.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c2.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span></pre></section><section class="umt-slide" data-coord="objects.umt:56:0"><h2 data-coord="objects.umt:56:0">Motivating Example for Prototypes: Complex Numbers Continued</h2><pre data-coord="objects.umt:60:0">$ nodejs ./complex1.js
1 + 1i: 1.4142135623730951
3 + 4i: 5
</pre><p data-coord="objects.umt:65:0">Note that each complex number has its own copy of the <samp data-coord="objects.umt:65:54">toString()</samp>
and <samp data-coord="objects.umt:65:71">magnitude()</samp> functions.
</p></section><section class="umt-slide" data-coord="objects.umt:69:0"><h2 data-coord="objects.umt:69:0">Using a Prototype Object to Hold Common Functions</h2><pre>complexFns <span class="hl opt">= {</span>
  <span class="hl kwd">toString</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> <span class="hl str">`</span><span class="hl ipl">${this.x}</span> <span class="hl str">+</span> <span class="hl ipl">${this.y}</span><span class="hl str">i`</span>
  <span class="hl opt">},</span>
  <span class="hl kwd">magnitude</span><span class="hl opt">:</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> Math<span class="hl opt">.</span><span class="hl kwd">sqrt</span><span class="hl opt">(</span><span class="hl kwa">this</span><span class="hl opt">.</span>x<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">+</span> <span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>
</pre></section><section class="umt-slide" data-coord="objects.umt:75:0"><h2 data-coord="objects.umt:75:0">Using a Prototype Object to Hold Common Functions: Continued</h2><pre>
<span class="hl slc">//use complexFns as prototype for c1</span>
<span class="hl kwa">const</span> c1 <span class="hl opt">=</span> Object<span class="hl opt">.</span><span class="hl kwd">create</span><span class="hl opt">(</span>complexFns<span class="hl opt">);</span>  
c1<span class="hl opt">.</span>x <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span> c1<span class="hl opt">.</span>y <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>

<span class="hl slc">//use complexFns as prototype for c2</span>
<span class="hl kwa">const</span> c2 <span class="hl opt">=</span> Object<span class="hl opt">.</span><span class="hl kwd">create</span><span class="hl opt">(</span>complexFns<span class="hl opt">);</span>
c2<span class="hl opt">.</span>x <span class="hl opt">=</span> <span class="hl num">3</span><span class="hl opt">;</span> c2<span class="hl opt">.</span>y <span class="hl opt">=</span> <span class="hl num">4</span><span class="hl opt">;</span>

console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c1.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c1.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span>
console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c2.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c2.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span></pre></section><section class="umt-slide" data-coord="objects.umt:81:0"><h2 data-coord="objects.umt:81:0">Prototype Chains</h2><ul data-coord="objects.umt:84:0"><li data-coord="objects.umt:84:0"><p data-coord="objects.umt:84:4">Each object has an internal <samp data-coord="objects.umt:84:32">[[Prototype]]</samp> property.
</p></li><li data-coord="objects.umt:86:0"><p data-coord="objects.umt:86:4">When looking up a property, the property is first looked
for in the object; if not found then it is looked for
in the object's prototype; if not found there, it is
looked for in the object's prototype's prototype.
The lookup continues up the prototype chain until
the property is found or the prototype is <samp data-coord="objects.umt:86:330">null</samp>.
</p></li><li data-coord="objects.umt:93:0"><p data-coord="objects.umt:93:4">Note that the prototype chain is only used for property
lookup.  When a property is assigned to, the assignment
is made directly in the object; the prototype is
not used at all.
</p></li><li data-coord="objects.umt:98:0"><p data-coord="objects.umt:98:4">Prototype can be accessed using <samp data-coord="objects.umt:98:36">Object.getPrototypeOf()</samp>
or <samp data-coord="objects.umt:98:69">__proto__</samp> property (supported by most browsers,
being officially blessed by standards, but is
<em data-coord="objects.umt:98:270"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto" data-coord="objects.umt:98:270">no longer recommended</a></em>).
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:103:0"><h2 data-coord="objects.umt:103:0">Object Methods</h2><p data-coord="objects.umt:107:0">The <samp data-coord="objects.umt:107:4">Object</samp> class has many useful
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" data-coord="objects.umt:107:126">methods.</a>  Some particularly useful ones:
</p><dl data-coord="objects.umt:111:0"><dt data-coord="objects.umt:111:2"> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" data-coord="objects.umt:111:99">Object.create(proto)</a></dt><dd data-coord="objects.umt:112:0"><p data-coord="objects.umt:112:4">Returns new object with prototype <samp data-coord="objects.umt:112:38">proto</samp>.
</p></dd><dt data-coord="objects.umt:114:2"> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" data-coord="objects.umt:114:99">Object.assign(target,...sources)</a> </dt><dd data-coord="objects.umt:115:0"><p data-coord="objects.umt:115:4">Assign <samp data-coord="objects.umt:115:11">source</samp> properties to <samp data-coord="objects.umt:115:34">target</samp>, with later source properties
overwriting earlier ones.  Returns <samp data-coord="objects.umt:115:112">target</samp>.
</p></dd><dt data-coord="objects.umt:118:2"> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" data-coord="objects.umt:118:112">Object.getOwnPropertyNames(obj)</a></dt><dd data-coord="objects.umt:119:0"><p data-coord="objects.umt:119:4">All non-inherited property names.
</p></dd><dt data-coord="objects.umt:121:2"> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" data-coord="objects.umt:121:97">Object.keys(),</a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values" data-coord="objects.umt:121:210">Object.values(),</a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" data-coord="objects.umt:121:326">Object.entries()</a></dt><dd data-coord="objects.umt:122:0"><p data-coord="objects.umt:122:4">Enumerable keys, values and key-value pairs.
</p></dd></dl></section><section class="umt-slide" data-coord="objects.umt:124:0"><h2 data-coord="objects.umt:124:0">Constructors</h2><ul data-coord="objects.umt:127:0"><li data-coord="objects.umt:127:0"><p data-coord="objects.umt:127:4">Every function has a <samp data-coord="objects.umt:127:25">prototype</samp> property.  The <samp data-coord="objects.umt:127:52">Function</samp> constructor
initializes it to something which looks like <samp data-coord="objects.umt:127:124">{ constructor: this }</samp>.
</p></li><li data-coord="objects.umt:130:0"><p data-coord="objects.umt:130:4">Any function which is invoked preceeded by the <samp data-coord="objects.umt:130:51">new</samp> prefix
operator is being used as a constructor.
</p></li><li data-coord="objects.umt:133:0"><p data-coord="objects.umt:133:4">Within the body of a function invoked as a constructor, <samp data-coord="objects.umt:133:60">this</samp>
refers to a newly created object instance with <samp data-coord="objects.umt:133:118">[[prototype]]</samp>
internal property set to the <samp data-coord="objects.umt:133:167">prototype</samp> property of the function.
</p></li><li data-coord="objects.umt:137:0"><p data-coord="objects.umt:137:4">Hence the <samp data-coord="objects.umt:137:14">prototype</samp> property of the function provides access to
the prototype for the object instance; specifically, assigning to
a property of the function <samp data-coord="objects.umt:137:171">prototype</samp> is equivalent to assigning
to the object prototype.
</p></li><li data-coord="objects.umt:142:0"><p data-coord="objects.umt:142:4"><strong data-coord="objects.umt:142:4">By convention</strong>, constructor names start with an uppercase letter.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:144:0"><h2 data-coord="objects.umt:144:0">Constructor Example</h2><pre><span class="hl kwa">function</span> <span class="hl kwd">Complex</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">) {</span>
  <span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">=</span> x<span class="hl opt">;</span>
  <span class="hl kwa">this</span><span class="hl opt">.</span>y <span class="hl opt">=</span> y<span class="hl opt">;</span>
<span class="hl opt">}</span>

Complex<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span><span class="hl kwd">toString</span> <span class="hl opt">=</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
  <span class="hl kwa">return</span> <span class="hl str">`</span><span class="hl ipl">${this.x}</span> <span class="hl str">+</span> <span class="hl ipl">${this.y}</span><span class="hl str">i`</span>
<span class="hl opt">};</span>
Complex<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span><span class="hl kwd">magnitude</span> <span class="hl opt">=</span> <span class="hl kwa">function</span><span class="hl opt">() {</span>
  <span class="hl kwa">return</span> Math<span class="hl opt">.</span><span class="hl kwd">sqrt</span><span class="hl opt">(</span><span class="hl kwa">this</span><span class="hl opt">.</span>x<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">+</span> <span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>y<span class="hl opt">);</span>
<span class="hl opt">};</span>

<span class="hl kwa">const</span> c1 <span class="hl opt">=</span> <span class="hl kwa">new</span> <span class="hl kwd">Complex</span><span class="hl opt">(</span><span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">1</span><span class="hl opt">);</span>
<span class="hl kwa">const</span> c2 <span class="hl opt">=</span> <span class="hl kwa">new</span> <span class="hl kwd">Complex</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">4</span><span class="hl opt">);</span>

console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c1.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c1.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span>
console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${c2.toString()}</span><span class="hl str">:</span> <span class="hl ipl">${c2.magnitude()}</span><span class="hl str">`</span><span class="hl opt">);</span>


</pre></section><section class="umt-slide" data-coord="objects.umt:150:0"><h2 data-coord="objects.umt:150:0">Constructor Return Value</h2><ul data-coord="objects.umt:153:0"><li data-coord="objects.umt:153:0"><p data-coord="objects.umt:153:4">Normally a constructor function does <strong data-coord="objects.umt:153:41">not</strong> explicitly return a value.
In that case, the return value is set to a reference to the newly
created object.
</p></li><li data-coord="objects.umt:157:0"><p data-coord="objects.umt:157:4">However, if the return value is explicitly set to an object (not a
primitive), then that object is return'd from the constructor.
</p></li><li data-coord="objects.umt:160:0"><p data-coord="objects.umt:160:4">Makes it possible to have constructor hide instance variables
using closure.  
</p></li><li data-coord="objects.umt:163:0"><p data-coord="objects.umt:163:4">Makes it possible to have a constructor share instances by not
returning the newly created instance.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:167:0"><h2 data-coord="objects.umt:167:0">Sharing Instances</h2><p data-coord="objects.umt:170:0">Can use constructor return value to cache object instances to avoid
creating a new instance unnecessarily.
</p><pre><span class="hl kwa">const</span> bigInstances <span class="hl opt">= { };</span>

<span class="hl kwa">function</span> <span class="hl kwd">BigInstance</span><span class="hl opt">(</span>id<span class="hl opt">, ...) {</span> <span class="hl slc">//... is pseudo-code, not rest</span>
  <span class="hl kwa">if</span> <span class="hl opt">(</span>bigInstances<span class="hl opt">[</span>id<span class="hl opt">])</span> <span class="hl kwa">return</span> bigInstances<span class="hl opt">[</span>id<span class="hl opt">];</span>
  <span class="hl slc">//construct new instance as usual</span>
  <span class="hl opt">...</span>
  bigInstances<span class="hl opt">[</span>id<span class="hl opt">] =</span> <span class="hl kwa">this</span><span class="hl opt">;</span>
<span class="hl opt">}</span></pre></section><section class="umt-slide" data-coord="objects.umt:185:0"><h2 data-coord="objects.umt:185:0">Inheritance</h2><ul data-coord="objects.umt:188:0"><li data-coord="objects.umt:188:0"><p data-coord="objects.umt:188:4">We could implement classical inheritance using a pattern like
<samp data-coord="objects.umt:188:70">Child.prototype = Object.create(Parent.prototype)</samp>.  Hence
<samp data-coord="objects.umt:188:134">Child</samp> will inherit properties from <samp data-coord="objects.umt:188:171">Parent</samp>.
</p></li><li data-coord="objects.umt:192:0"><p data-coord="objects.umt:192:4">Older code may use a pattern like <samp data-coord="objects.umt:192:38">Child.prototype = new
    Parent()</samp>.  Problems include the fact that the <samp data-coord="objects.umt:192:112">Parent</samp>
constructor is run (which may have undesirable side-effects)
and how do we handle arguments to the <samp data-coord="objects.umt:192:228">Parent</samp> constructor
if it expects arguments.
</p></li><li data-coord="objects.umt:198:0"><p data-coord="objects.umt:198:4">Note that we create a new object for Child's prototype rather than
simply <samp data-coord="objects.umt:198:82">Parent</samp> as we do not want assignments to <samp data-coord="objects.umt:198:124">Child.prototype</samp>
to affect <samp data-coord="objects.umt:198:156">Parent</samp>.
</p></li><li data-coord="objects.umt:202:0"><p data-coord="objects.umt:202:4">Since the constructor is stored in an object's prototype,
in both cases we need to fix up the constructor:
<samp data-coord="objects.umt:202:119">Child.prototype.constructor = Child</samp>.
</p></li><li data-coord="objects.umt:206:0"><p data-coord="objects.umt:206:4">Problematic in that we need to apply this pattern.  Could wrap
within a function <samp data-coord="objects.umt:206:89">inherit()</samp>, but still messy (see Crockford).
</p></li><li data-coord="objects.umt:209:0"><p data-coord="objects.umt:209:4">Also, classical inheritance is generally problematic.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:212:0"><h2 data-coord="objects.umt:212:0">JavaScript Classes</h2><ul data-coord="objects.umt:215:0"><li data-coord="objects.umt:215:0"><p data-coord="objects.umt:215:4">Added in es6 to make programmers coming in from other languages
more comfortable.
</p></li><li data-coord="objects.umt:218:0"><p data-coord="objects.umt:218:4">Create a new class using a class declaration.
</p></li><li data-coord="objects.umt:220:0"><p data-coord="objects.umt:220:4">Create a new class using a class expression.
</p></li><li data-coord="objects.umt:222:0"><p data-coord="objects.umt:222:4">Inheritance using <samp data-coord="objects.umt:222:22">extends</samp>.
</p></li><li data-coord="objects.umt:224:0"><p data-coord="objects.umt:224:4">Static methods.
</p></li><li data-coord="objects.umt:226:0"><p data-coord="objects.umt:226:4">Can extend builtin classes.
</p></li><li data-coord="objects.umt:228:0"><p data-coord="objects.umt:228:4">Very thin layer around prototype-based inheritance.
See <a href="https://medium.com/@PitaJ/javascript-inheritance-patterns-179d8f6c143c" data-coord="objects.umt:228:137">this</a> for tradeoffs.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:231:0"><h2 data-coord="objects.umt:231:0">Shapes Example</h2><pre>
<span class="hl kwa">class</span> Shape <span class="hl opt">{</span>
  <span class="hl kwa">constructor</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>x <span class="hl opt">=</span> x<span class="hl opt">;</span> <span class="hl kwa">this</span><span class="hl opt">.</span>y <span class="hl opt">=</span> y<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl slc">//possibly poor design</span>
  <span class="hl kwa">static</span> <span class="hl kwd">distance</span><span class="hl opt">(</span>s1<span class="hl opt">,</span> s2<span class="hl opt">) {</span>
    <span class="hl kwa">const</span> xDiff <span class="hl opt">=</span> s1<span class="hl opt">.</span>x <span class="hl opt">-</span> s2<span class="hl opt">.</span>x<span class="hl opt">;</span>
    <span class="hl kwa">const</span> yDiff <span class="hl opt">=</span> s1<span class="hl opt">.</span>y <span class="hl opt">-</span> s2<span class="hl opt">.</span>y<span class="hl opt">;</span>
    <span class="hl kwa">return</span> Math<span class="hl opt">.</span><span class="hl kwd">sqrt</span><span class="hl opt">(</span>xDiff<span class="hl opt">*</span>xDiff <span class="hl opt">+</span> yDiff<span class="hl opt">*</span>yDiff<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>
</pre></section><section class="umt-slide" data-coord="objects.umt:236:0"><h2 data-coord="objects.umt:236:0">Shapes Example Continued</h2><pre>
<span class="hl kwa">class</span> Rect <span class="hl kwa">extends</span> Shape <span class="hl opt">{</span>
  <span class="hl kwa">constructor</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">,</span> w<span class="hl opt">,</span> h<span class="hl opt">) {</span>
    <span class="hl kwa">super</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">);</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>width <span class="hl opt">=</span> w<span class="hl opt">;</span> <span class="hl kwa">this</span><span class="hl opt">.</span>height <span class="hl opt">=</span> h<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwd">area</span><span class="hl opt">() {</span> <span class="hl kwa">return this</span><span class="hl opt">.</span>width<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>height<span class="hl opt">; }</span>
<span class="hl opt">}</span>

<span class="hl kwa">class</span> Circle <span class="hl kwa">extends</span> Shape <span class="hl opt">{</span>
  <span class="hl kwa">constructor</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">,</span> r<span class="hl opt">) {</span>
    <span class="hl kwa">super</span><span class="hl opt">(</span>x<span class="hl opt">,</span> y<span class="hl opt">);</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>radius <span class="hl opt">=</span> r<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwd">area</span><span class="hl opt">() {</span> <span class="hl kwa">return</span> Math<span class="hl opt">.</span>PI<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>radius<span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">.</span>radius<span class="hl opt">; }</span>
<span class="hl opt">}</span>
</pre></section><section class="umt-slide" data-coord="objects.umt:242:0"><h2 data-coord="objects.umt:242:0">Shapes Example Driver and Log</h2><pre>
<span class="hl kwa">const</span> shapes <span class="hl opt">= [</span>
  <span class="hl kwa">new</span> <span class="hl kwd">Rect</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">4</span><span class="hl opt">,</span> <span class="hl num">5</span><span class="hl opt">,</span> <span class="hl num">6</span><span class="hl opt">),</span>
  <span class="hl kwa">new</span> <span class="hl kwd">Circle</span><span class="hl opt">(</span><span class="hl num">0</span><span class="hl opt">,</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl num">1</span><span class="hl opt">),</span>
<span class="hl opt">];</span>

shapes<span class="hl opt">.</span><span class="hl kwd">forEach</span><span class="hl opt">((</span>s<span class="hl opt">) =&gt;</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>s<span class="hl opt">.</span>x<span class="hl opt">,</span> s<span class="hl opt">.</span>y<span class="hl opt">,</span> s<span class="hl opt">.</span><span class="hl kwd">area</span><span class="hl opt">()));</span>

console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>Shape<span class="hl opt">.</span><span class="hl kwd">distance</span><span class="hl opt">(</span>shapes<span class="hl opt">[</span><span class="hl num">0</span><span class="hl opt">],</span> shapes<span class="hl opt">[</span><span class="hl num">1</span><span class="hl opt">]));</span>
</pre><pre data-coord="objects.umt:248:0">$ ./shapes.js 
3 4 30
0 0 3.141592653589793
5
$
</pre></section><section class="umt-slide" data-coord="objects.umt:255:0"><h2 data-coord="objects.umt:255:0">Class Constants</h2><ul data-coord="objects.umt:258:0"><li data-coord="objects.umt:258:0"><p data-coord="objects.umt:258:4">Cannot define <samp data-coord="objects.umt:258:18">const</samp> within a <samp data-coord="objects.umt:258:35">class</samp>; following results in
a syntax error:
</p><pre>    <span class="hl kwa">class</span> C <span class="hl opt">{</span>
      <span class="hl kwa">static const</span> constant <span class="hl opt">=</span> <span class="hl num">42</span><span class="hl opt">;</span>
    <span class="hl opt">}</span></pre></li><li data-coord="objects.umt:267:0"><p data-coord="objects.umt:267:4">Use following pattern:
</p><pre>
<span class="hl kwa">const</span> C <span class="hl opt">=</span> <span class="hl num">42</span><span class="hl opt">;</span>

<span class="hl kwa">class</span> C <span class="hl opt">{</span>
  <span class="hl kwa">static get</span> <span class="hl kwd">constant</span><span class="hl opt">() {</span> <span class="hl kwa">return</span> C<span class="hl opt">; }</span>
<span class="hl opt">}</span>

console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>C<span class="hl opt">.</span>constant<span class="hl opt">);</span></pre></li></ul></section><section class="umt-slide" data-coord="objects.umt:272:0"><h2 data-coord="objects.umt:272:0">Object Equality Examples</h2><p data-coord="objects.umt:275:0">For both <samp data-coord="objects.umt:275:9">==</samp> and <samp data-coord="objects.umt:275:18">===</samp>, objects are equal only if they have the same
reference.
</p><pre><span class="hl opt">&gt; {} == {}</span>
<span class="hl kwa">false</span>
<span class="hl opt">&gt; {} === {}</span>        
<span class="hl kwa">false</span>
<span class="hl opt">&gt;</span> x <span class="hl opt">= {}</span>
<span class="hl opt">{}</span>
<span class="hl opt">&gt;</span> y <span class="hl opt">=</span> x
<span class="hl opt">{}</span>
<span class="hl opt">&gt;</span> x <span class="hl opt">==</span> y
<span class="hl kwa">true</span>
<span class="hl opt">&gt;</span> x <span class="hl opt">===</span> y
<span class="hl kwa">true</span>
<span class="hl opt">&gt;</span> </pre></section><section class="umt-slide" data-coord="objects.umt:294:0"><h2 data-coord="objects.umt:294:0">Review Arrays</h2><p data-coord="objects.umt:297:0">Arrays are like objects except:
</p><ul data-coord="objects.umt:299:0"><li data-coord="objects.umt:299:0"><p data-coord="objects.umt:299:4">It has an auto-maintained <samp data-coord="objects.umt:299:30">length</samp> property (always set to 1 greater
than the largest array index).
</p></li><li data-coord="objects.umt:302:0"><p data-coord="objects.umt:302:4">Arrays have their prototype set to <samp data-coord="objects.umt:302:39">Array.prototype</samp> (<samp data-coord="objects.umt:302:62">Array.prototype</samp>
has its prototype set to <samp data-coord="objects.umt:302:109">Object.prototype</samp>, hence arrays inherit
object methods).
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:307:0"><h2 data-coord="objects.umt:307:0">Property Attributes</h2><pre><span class="hl opt">&gt;</span> a <span class="hl opt">= {</span> x<span class="hl opt">:</span> <span class="hl num">22</span> <span class="hl opt">}</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> <span class="hl num">22</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">getOwnPropertyDescriptors</span><span class="hl opt">(</span>a<span class="hl opt">)</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> 
   <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl num">22</span><span class="hl opt">,</span>
     writable<span class="hl opt">:</span> <span class="hl kwa">true</span><span class="hl opt">,</span>
     enumerable<span class="hl opt">:</span> <span class="hl kwa">true</span><span class="hl opt">,</span>         <span class="hl slc">//loop for...in</span>
     configurable<span class="hl opt">:</span> <span class="hl kwa">true</span> <span class="hl opt">} }</span>    <span class="hl slc">//change descr; delete</span>
<span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">defineProperty</span><span class="hl opt">(</span>a<span class="hl opt">,</span> <span class="hl str">&apos;y&apos;</span><span class="hl opt">, {})</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> <span class="hl num">22</span> <span class="hl opt">}</span></pre></section><section class="umt-slide" data-coord="objects.umt:324:0"><h2 data-coord="objects.umt:324:0">Property Attributes Continued</h2><pre><span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">getOwnPropertyDescriptors</span><span class="hl opt">(</span>a<span class="hl opt">)</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> 
   <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl num">22</span><span class="hl opt">,</span>
     writable<span class="hl opt">:</span> <span class="hl kwa">true</span><span class="hl opt">,</span>
     enumerable<span class="hl opt">:</span> <span class="hl kwa">true</span><span class="hl opt">,</span>
     configurable<span class="hl opt">:</span> <span class="hl kwa">true</span> <span class="hl opt">},</span>
  y<span class="hl opt">:</span> 
   <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl kwb">undefined</span><span class="hl opt">,</span>
     writable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     enumerable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     configurable<span class="hl opt">:</span> <span class="hl kwa">false</span> <span class="hl opt">} }</span></pre></section><section class="umt-slide" data-coord="objects.umt:341:0"><h2 data-coord="objects.umt:341:0">Property Attributes Continued</h2><pre><span class="hl opt">&gt;</span> <span class="hl kwa">delete</span><span class="hl opt">(</span>a<span class="hl opt">[</span><span class="hl str">&apos;x&apos;</span><span class="hl opt">])</span>
<span class="hl kwa">true</span>
<span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">getOwnPropertyDescriptors</span><span class="hl opt">(</span>a<span class="hl opt">)</span>
<span class="hl opt">{</span> y<span class="hl opt">:</span> 
   <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl kwb">undefined</span><span class="hl opt">,</span>
     writable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     enumerable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     configurable<span class="hl opt">:</span> <span class="hl kwa">false</span> <span class="hl opt">} }</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">delete</span><span class="hl opt">(</span>a<span class="hl opt">[</span><span class="hl str">&apos;y&apos;</span><span class="hl opt">])</span>
<span class="hl kwa">false</span>
<span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">getOwnPropertyDescriptors</span><span class="hl opt">(</span>a<span class="hl opt">)</span>
<span class="hl opt">{</span> y<span class="hl opt">:</span> 
   <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl kwb">undefined</span><span class="hl opt">,</span>
     writable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     enumerable<span class="hl opt">:</span> <span class="hl kwa">false</span><span class="hl opt">,</span>
     configurable<span class="hl opt">:</span> <span class="hl kwa">false</span> <span class="hl opt">} }</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:364:0"><h2 data-coord="objects.umt:364:0">Property Getter</h2><pre><span class="hl opt">&gt;</span> obj <span class="hl opt">= {</span> <span class="hl kwa">get</span> <span class="hl kwd">len</span><span class="hl opt">() {</span> <span class="hl kwa">return this</span><span class="hl opt">.</span>value<span class="hl opt">.</span>length<span class="hl opt">; } }</span>
<span class="hl opt">{</span> len<span class="hl opt">: [</span>Getter<span class="hl opt">] }</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>value <span class="hl opt">= [</span><span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">2</span><span class="hl opt">]</span>
<span class="hl opt">[</span> <span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">2</span> <span class="hl opt">]</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>len
<span class="hl num">2</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>value <span class="hl opt">= [</span><span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">2</span><span class="hl opt">,</span> <span class="hl num">3</span><span class="hl opt">]</span>
<span class="hl opt">[</span> <span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">2</span><span class="hl opt">,</span> <span class="hl num">3</span> <span class="hl opt">]</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>len
<span class="hl num">3</span></pre></section><section class="umt-slide" data-coord="objects.umt:381:0"><h2 data-coord="objects.umt:381:0">Property Setter</h2><p data-coord="objects.umt:385:0">Use property <samp data-coord="objects.umt:385:13">x</samp> as proxy for property <samp data-coord="objects.umt:385:39">_x</samp> while counting # of
changes to property <samp data-coord="objects.umt:385:84">x</samp>.
</p><pre><span class="hl opt">&gt;</span> obj <span class="hl opt">= {</span>
  nChanges<span class="hl opt">:</span> <span class="hl num">0</span><span class="hl opt">,</span> 
  <span class="hl kwa">get</span> <span class="hl kwd">x</span><span class="hl opt">() {</span> <span class="hl kwa">return this</span><span class="hl opt">.</span>_x<span class="hl opt">; },</span>
  <span class="hl kwa">set</span> <span class="hl kwd">x</span><span class="hl opt">(</span>v<span class="hl opt">) {</span>
     <span class="hl kwa">if</span> <span class="hl opt">(</span>v <span class="hl opt">!==</span> <span class="hl kwa">this</span><span class="hl opt">.</span>_x<span class="hl opt">)</span> <span class="hl kwa">this</span><span class="hl opt">.</span>nChanges<span class="hl opt">++;</span> 
     <span class="hl kwa">this</span><span class="hl opt">.</span>_x <span class="hl opt">=</span> v<span class="hl opt">;</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span></pre></section><section class="umt-slide" data-coord="objects.umt:399:0"><h2 data-coord="objects.umt:399:0">Property Setter Continued</h2><pre><span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>x
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>x <span class="hl opt">=</span> <span class="hl num">22</span>
<span class="hl num">22</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>nChanges
<span class="hl num">1</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>x <span class="hl opt">=</span> <span class="hl num">42</span>
<span class="hl num">42</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>nChanges
<span class="hl num">2</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>x <span class="hl opt">=</span> <span class="hl num">42</span>
<span class="hl num">42</span>
<span class="hl opt">&gt;</span> obj<span class="hl opt">.</span>nChanges
<span class="hl num">2</span>
<span class="hl opt">&gt;</span> </pre></section><section class="umt-slide" data-coord="objects.umt:421:0"><h2 data-coord="objects.umt:421:0">Enumerating Object Properties using for-in</h2><p data-coord="objects.umt:424:0"><samp data-coord="objects.umt:424:0">for (let v in object) { ... }</samp>
</p><ul data-coord="objects.umt:426:0"><li data-coord="objects.umt:426:0"><p data-coord="objects.umt:426:4">Sets v to successive <strong data-coord="objects.umt:426:25">enumerable</strong> properties in object <strong data-coord="objects.umt:426:59">including
    inherited properties</strong>.
</p></li><li data-coord="objects.umt:429:0"><p data-coord="objects.umt:429:4">No guarantee on ordering of properties; specifically, no guarantee
that it will go over array indexes in order.  Better to use plain
<samp data-coord="objects.umt:429:145">for</samp> or <samp data-coord="objects.umt:429:154">for-of</samp>.
</p></li><li data-coord="objects.umt:433:0"><p data-coord="objects.umt:433:4">Will loop over enumerable properties defined within the object
as well as those inherited through the prototype chain.
</p></li><li data-coord="objects.umt:436:0"><p data-coord="objects.umt:436:4">If we want to iterate only over local properties, use
<samp data-coord="objects.umt:436:62">getOwnPropertyNames()</samp> or <samp data-coord="objects.umt:436:89">hasOwnProperty()</samp> to filter.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:440:0"><h2 data-coord="objects.umt:440:0">Enumerating Example</h2><pre><span class="hl opt">&gt;</span> a <span class="hl opt">= {</span> x<span class="hl opt">:</span> <span class="hl num">1</span> <span class="hl opt">}</span>
<span class="hl opt">{</span> x<span class="hl opt">:</span> <span class="hl num">1</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span> b <span class="hl opt">=</span> Object<span class="hl opt">.</span><span class="hl kwd">create</span><span class="hl opt">(</span>a<span class="hl opt">)</span> <span class="hl slc">//a is b&apos;s prototype</span>
<span class="hl opt">{}</span>
<span class="hl opt">&gt;</span> b<span class="hl opt">.</span>y <span class="hl opt">=</span> <span class="hl num">2</span>
<span class="hl num">2</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">let</span> k <span class="hl kwa">in</span> b<span class="hl opt">) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>k<span class="hl opt">); }</span>
y
x
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">let</span> k <span class="hl kwa">in</span> b<span class="hl opt">) {</span>
    <span class="hl kwa">if</span> <span class="hl opt">(</span>b<span class="hl opt">.</span><span class="hl kwd">hasOwnProperty</span><span class="hl opt">(</span>k<span class="hl opt">))</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>k<span class="hl opt">);</span>
   <span class="hl opt">}</span>
y
<span class="hl kwb">undefined</span></pre></section><section class="umt-slide" data-coord="objects.umt:461:0"><h2 data-coord="objects.umt:461:0">Enumerating Example Continued</h2><pre><span class="hl opt">&gt;</span> names <span class="hl opt">=</span> Object<span class="hl opt">.</span><span class="hl kwd">getOwnPropertyNames</span><span class="hl opt">(</span>b<span class="hl opt">)</span>
<span class="hl opt">[</span> <span class="hl str">&apos;y&apos;</span> <span class="hl opt">]</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">let</span> k <span class="hl kwa">in</span> names<span class="hl opt">) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>k<span class="hl opt">); }</span>
<span class="hl num">0</span>
<span class="hl kwb">undefined</span>
<span class="hl kwa">for</span> <span class="hl opt">(</span>k <span class="hl kwa">of</span> names<span class="hl opt">) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>k<span class="hl opt">); }</span>
y
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:476:0"><h2 data-coord="objects.umt:476:0">Another Enumerating Example</h2><pre><span class="hl opt">&gt;</span> x <span class="hl opt">= {</span>a <span class="hl opt">:</span> <span class="hl num">1</span><span class="hl opt">,</span> b<span class="hl opt">:</span> <span class="hl num">2</span> <span class="hl opt">}</span>
<span class="hl opt">{</span> a<span class="hl opt">:</span> <span class="hl num">1</span><span class="hl opt">,</span> b<span class="hl opt">:</span> <span class="hl num">2</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span> Object<span class="hl opt">.</span><span class="hl kwd">defineProperty</span><span class="hl opt">(</span>x<span class="hl opt">,</span> <span class="hl str">&apos;c&apos;</span><span class="hl opt">,</span>
                        <span class="hl opt">{</span> value<span class="hl opt">:</span> <span class="hl num">3</span><span class="hl opt">})</span> <span class="hl slc">//not enumerable</span>
<span class="hl opt">{</span> a<span class="hl opt">:</span> <span class="hl num">1</span><span class="hl opt">,</span> b<span class="hl opt">:</span> <span class="hl num">2</span> <span class="hl opt">}</span>
<span class="hl opt">&gt;</span> x<span class="hl opt">.</span>c
<span class="hl num">3</span>
<span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">let</span> k <span class="hl kwa">in</span> x<span class="hl opt">) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>k<span class="hl opt">); }</span>
a
b
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span> x<span class="hl opt">.</span>c
<span class="hl num">3</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:496:0"><h2 data-coord="objects.umt:496:0">Iterating using for-of</h2><p data-coord="objects.umt:499:0">Values contained in <samp data-coord="objects.umt:499:20">Iterable</samp> objects can be iterated over using
<samp data-coord="objects.umt:499:66">for-of</samp> loops.
</p><pre><span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">let var of</span> iterable<span class="hl opt">) { ... }</span></pre><p data-coord="objects.umt:506:0">Builtin iterables include <samp data-coord="objects.umt:506:26">String</samp>, <samp data-coord="objects.umt:506:36">Array</samp>, ES6 <samp data-coord="objects.umt:506:49">Map</samp>, <samp data-coord="objects.umt:506:56">arguments</samp>,
but <strong data-coord="objects.umt:506:73">not Object</strong>.
</p><pre><span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">const</span> x <span class="hl kwa">of</span> <span class="hl str">&apos;abc&apos;</span><span class="hl opt">) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>x<span class="hl opt">); }</span>
a
b
c
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:518:0"><h2 data-coord="objects.umt:518:0">Building Iterables</h2><p data-coord="objects.umt:521:0">Can build iterables by implementing the
<em data-coord="objects.umt:521:129"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols" data-coord="objects.umt:521:129">iterable protocol</a></em>.
</p><ul data-coord="objects.umt:525:0"><li data-coord="objects.umt:525:0"><p data-coord="objects.umt:525:4">Implementing a zero argument method
with name given by <samp data-coord="objects.umt:525:63">Symbol.iterator</samp>.
</p></li><li data-coord="objects.umt:528:0"><p data-coord="objects.umt:528:4">When this function is invoked, it must return an object
implementing the <strong data-coord="objects.umt:528:81">iterator protocol</strong>.
</p></li><li data-coord="objects.umt:531:0"><p data-coord="objects.umt:531:4">So two protocols involved: <strong data-coord="objects.umt:531:31">iterable</strong> and <strong data-coord="objects.umt:531:46">iterator</strong>.  Generators
will simplify.
</p></li></ul></section><section class="umt-slide" data-coord="objects.umt:534:0"><h2 data-coord="objects.umt:534:0">Building Iterators</h2><p data-coord="objects.umt:537:0">An object implementing the <strong data-coord="objects.umt:537:27">iterator protocol</strong> must have a <samp data-coord="objects.umt:537:59">next()</samp>
method which returns an object having at least the following two
properties:
</p><dl data-coord="objects.umt:541:0"><dt data-coord="objects.umt:541:2"> <samp data-coord="objects.umt:541:1">done</samp></dt><dd data-coord="objects.umt:542:0"><p data-coord="objects.umt:542:4">A boolean which is set to true iff the iterator is done.
If true, then <samp data-coord="objects.umt:542:79">value</samp> optionally gives the return value of the
iterator.
</p></dd><dt data-coord="objects.umt:546:2"> <samp data-coord="objects.umt:546:1">value</samp></dt><dd data-coord="objects.umt:547:0"><p data-coord="objects.umt:547:4">Any JavaScript object giving the current value returned by the
iterator.  Need not be present when <samp data-coord="objects.umt:547:107">done</samp> is true.
</p></dd></dl></section><section class="umt-slide" data-coord="objects.umt:551:0"><h2 data-coord="objects.umt:551:0">Sequence Iterable</h2><p data-coord="objects.umt:554:0">Build a sequence iterable to allow iterating through a sequence of
integers.  Example edited log:
</p><pre><span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">const</span> v <span class="hl kwa">of</span> <span class="hl kwd">makeSeq</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">5</span><span class="hl opt">)) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>v<span class="hl opt">); }</span>
<span class="hl num">3</span>
<span class="hl num">4</span>
<span class="hl num">5</span>

<span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">const</span> v <span class="hl kwa">of</span> <span class="hl kwd">makeSeq</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">10</span><span class="hl opt">,</span> <span class="hl num">2</span><span class="hl opt">)) {</span> console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>v<span class="hl opt">); }</span>
<span class="hl num">3</span>
<span class="hl num">5</span>
<span class="hl num">7</span>
<span class="hl num">9</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:571:0"><h2 data-coord="objects.umt:571:0">Sequence Iterable Log Continued</h2><pre><span class="hl opt">&gt;</span> <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">const</span> i <span class="hl kwa">of</span> <span class="hl kwd">makeSeq</span><span class="hl opt">(</span><span class="hl num">1</span><span class="hl opt">,</span> <span class="hl num">2</span><span class="hl opt">)) {</span> <span class="hl slc">//nested seq obj lifetimes</span>
    <span class="hl kwa">for</span> <span class="hl opt">(</span><span class="hl kwa">const</span> j <span class="hl kwa">of</span> <span class="hl kwd">makeSeq</span><span class="hl opt">(</span><span class="hl num">3</span><span class="hl opt">,</span> <span class="hl num">4</span><span class="hl opt">)) {</span>
      console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span>i<span class="hl opt">,</span> j<span class="hl opt">);</span>
    <span class="hl opt">}</span>
  <span class="hl opt">}</span>
<span class="hl num">1 3</span>
<span class="hl num">1 4</span>
<span class="hl num">2 3</span>
<span class="hl num">2 4</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:587:0"><h2 data-coord="objects.umt:587:0">Sequence Iterable Code</h2><p data-coord="objects.umt:590:0">In <a href="code/seq.js" data-coord="objects.umt:590:18">seq.js:</a>
</p><pre><span class="hl kwa">function</span> <span class="hl kwd">makeSeq</span><span class="hl opt">(</span>lo<span class="hl opt">,</span> hi<span class="hl opt">,</span> inc<span class="hl opt">=</span><span class="hl num">1</span><span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl opt">{</span>
    <span class="hl opt">[</span>Symbol<span class="hl opt">.</span>iterator<span class="hl opt">]() {</span> <span class="hl slc">//fn property syntax</span>
      <span class="hl kwa">let</span> value <span class="hl opt">=</span> lo<span class="hl opt">;</span>
      <span class="hl kwa">return</span> <span class="hl opt">{</span>
        <span class="hl kwd">next</span><span class="hl opt">() {</span>
          <span class="hl kwa">const</span> obj <span class="hl opt">= {</span> done<span class="hl opt">:</span> value <span class="hl opt">&gt;</span> hi<span class="hl opt">,</span> value <span class="hl opt">};</span>
          value <span class="hl opt">+=</span> inc<span class="hl opt">;</span>
          <span class="hl kwa">return</span> obj<span class="hl opt">;</span>
        <span class="hl opt">},</span>
      <span class="hl opt">};</span>
    <span class="hl opt">},</span>
  <span class="hl opt">};</span>
<span class="hl opt">}</span></pre></section><section class="umt-slide" data-coord="objects.umt:611:0"><h2 data-coord="objects.umt:611:0">Monkey Patching to Add a New Function</h2><p data-coord="objects.umt:614:0">Built-in types can be changed at runtime: <strong data-coord="objects.umt:614:42">monkey-patching</strong>.
</p><pre><span class="hl opt">&gt;</span> <span class="hl str">&apos;  abcd  &apos;</span><span class="hl opt">.</span><span class="hl kwd">trim</span><span class="hl opt">()</span>
<span class="hl str">&apos;abcd&apos;</span>
<span class="hl opt">&gt;</span> <span class="hl str">&apos;  abcd  &apos;</span><span class="hl opt">.</span><span class="hl kwd">ltrim</span><span class="hl opt">()</span>  <span class="hl slc">//trim only on left</span>
TypeError<span class="hl opt">:</span> <span class="hl str">&quot;  abcd  &quot;</span><span class="hl opt">.</span>ltrim is not a <span class="hl kwa">function</span>
<span class="hl opt">&gt;</span> String<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span>ltrim <span class="hl opt">=</span>
    String<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span>ltrim <span class="hl opt">||</span> <span class="hl slc">//do not change</span>
    <span class="hl kwa">function</span><span class="hl opt">() {</span> <span class="hl kwa">return this</span><span class="hl opt">.</span><span class="hl kwd">replace</span><span class="hl opt">(</span><span class="hl kwc">/^\s+/</span><span class="hl opt">,</span> <span class="hl str">&apos;&apos;</span><span class="hl opt">); }</span>
<span class="hl opt">[</span>Function<span class="hl opt">]</span>
<span class="hl opt">&gt;</span> <span class="hl str">&apos;  abcd  &apos;</span><span class="hl opt">.</span><span class="hl kwd">ltrim</span><span class="hl opt">()</span>
<span class="hl str">&apos;abcd  &apos;</span>
<span class="hl opt">&gt;</span></pre></section><section class="umt-slide" data-coord="objects.umt:630:0"><h2 data-coord="objects.umt:630:0">Monkey Patching to Modify an Existing Function</h2><pre><span class="hl opt">&gt;</span> <span class="hl kwa">const</span> oldFn <span class="hl opt">=</span> String<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span>replace
<span class="hl kwb">undefined</span>
<span class="hl opt">&gt;</span> String<span class="hl opt">.</span><span class="hl kwa">prototype</span><span class="hl opt">.</span><span class="hl kwd">replace</span> <span class="hl opt">=</span> <span class="hl kwa">function</span><span class="hl opt">(</span>a1<span class="hl opt">,</span> a2<span class="hl opt">) {</span>
    <span class="hl kwa">const</span> v <span class="hl opt">=</span> oldFn<span class="hl opt">.</span><span class="hl kwd">call</span><span class="hl opt">(</span><span class="hl kwa">this</span><span class="hl opt">,</span> a1<span class="hl opt">,</span> a2<span class="hl opt">);</span>
    console<span class="hl opt">.</span><span class="hl kwd">log</span><span class="hl opt">(</span><span class="hl str">`</span><span class="hl ipl">${this}</span><span class="hl str">.replace(</span><span class="hl ipl">${a1}</span><span class="hl str">,</span> <span class="hl ipl">${a2}</span><span class="hl str">)=&gt;</span><span class="hl ipl">${v}</span><span class="hl str">`</span><span class="hl opt">);</span>
    <span class="hl kwa">return</span> v<span class="hl opt">;</span>
   <span class="hl opt">}</span>
<span class="hl opt">[</span>Function<span class="hl opt">]</span>
<span class="hl opt">&gt;</span> <span class="hl str">&apos; aabcaca&apos;</span><span class="hl opt">.</span><span class="hl kwd">replace</span><span class="hl opt">(</span><span class="hl kwc">/aa+/</span><span class="hl opt">,</span> <span class="hl str">&apos;x&apos;</span><span class="hl opt">)</span>
 aabcaca<span class="hl opt">.</span><span class="hl kwd">replace</span><span class="hl opt">(</span><span class="hl kwc">/aa+/</span><span class="hl opt">,</span> x<span class="hl opt">)=&gt;</span> xbcaca
<span class="hl str">&apos; xbcaca&apos;</span>
<span class="hl opt">&gt;</span> <span class="hl str">&apos; aabcaca&apos;</span><span class="hl opt">.</span><span class="hl kwd">replace</span><span class="hl opt">(/</span>a<span class="hl opt">/</span>g<span class="hl opt">, (</span>x<span class="hl opt">,</span> i<span class="hl opt">) =&gt;</span> <span class="hl kwd">String</span><span class="hl opt">(</span>i<span class="hl opt">))</span>
 aabcaca<span class="hl opt">.</span><span class="hl kwd">replace</span><span class="hl opt">(/</span>a<span class="hl opt">/</span>g<span class="hl opt">, (</span>x<span class="hl opt">,</span> i<span class="hl opt">) =&gt;</span> <span class="hl kwd">String</span><span class="hl opt">(</span>i<span class="hl opt">))=&gt;</span> <span class="hl num">12</span>bc5c7
<span class="hl str">&apos; 12bc5c7&apos;</span>
<span class="hl opt">&gt;</span> </pre></section></section>
</div> <!-- #content -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../assets/scripts/slide-controls.js"></script>
<script src="../../assets/scripts/loginAction.js"></script>
</body>
</html>
